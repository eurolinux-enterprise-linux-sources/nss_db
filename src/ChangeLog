2001-04-30  Mark Kettenis  <kettenis@gnu.org>

	* configure.in: Bump version number to 2.2.3.
	* NEWS: Add entry for version 2.2.3.
	* README: Update for new version number.

	* aclocal.m4, configure, Makefile.in, src/Makefile.in: Regenerated.
	* acconfig.h, config.h.in: New files.

	* src/db-ethers.c: Include <netinet/etherh>.
	(struct etherent): Declare.
	* src/files-ethers.c: Updated from glibc CVS.

	* src/Makefile.am (EXTRA_DIST): New variable.  Add libnss_db.map.
	(libnss_db_la_DEPENDENCIES): New variable.  Add libnss_db.map.

	Update to libtool 1.4.
	* config.guess, config.sub, ltmain.sh: Updated.
	* ltconfig: Removed.

	Convert to non-flat directory structure and gettextize.
	* Makefile.am Makefile.in db-XXX.c db-alias.c db-compat.c
	db-compat.h db-ethers.c db-grp.c db-netgrp.c db-open.c db-proto.c
	db-pwd.c db-rpc.c db-service.c db-spwd.c files-ethers.c
	files-grp.c files-parse.c files-proto.c files-pwd.c files-rpc.c
	files-service.c files-spwd.c libnss_db.map makedb.c netgroup.h
	nss_db.h: Move to src/*.
	* Makefile.am: New file.
	(AUTOMAKE_OPTIONS, EXTRA_DIST): Move here from src/Makefile.am.
	* configure.in: Call AM_CONFIG_HEADER and AM_GNU_GETTEXT.
	(ALL_LINGUAS): New variable.
	(AC_OUPUT): Add src/Makefile, intl/Makefile and po/Makefile.
	* intl/ChangeLog intl/Makefile.in intl/VERSION intl/bindtextdom.c
	intl/config.charset intl/dcgettext.c intl/dcigettext.c
	intl/dcngettext.c intl/dgettext.c intl/dngettext.c
	intl/explodename.c intl/finddomain.c intl/gettext.c intl/gettext.h
	intl/gettextP.h intl/hash-string.h intl/intl-compat.c
	intl/l10nflist.c intl/libgettext.h intl/libgnuintl.h
	intl/loadinfo.h intl/loadmsgcat.c intl/localcharset.c
	intl/locale.alias intl/localealias.c intl/ngettext.c intl/plural.y
	intl/ref-add.sin intl/ref-del.sin intl/textdomain.c:: New files
	from gettext-0.10.37.
	* po/ChangeLog po/Makefile.in.in po/POTFILES.in po/de.gmo po/de.po
	po/nl.gmo po/nl.po po/nss_db.pot: New files, mostly from
	gettext-0.10.37.

2000-08-15  Mark Kettenis  <kettenis@gnu.org>

	* README: Add warning about Berkeley DB not being on the root
	partition.

	* rellns-sh: Copied from scripts directory in glibc CVS
	repository.
	* Makefile.am (EXTRA_DIST): Add rellns-sh.

	* configure.in: Add logic to install libnss_db in
	/lib when configuring on Linux with prefix "/usr".
	* Makefile.am (VERSION, INTERFACE, slibdir): New variables
	(libnss_db_la_LDFLAGS): Use $(INTERFACE) for the library version
	info.
	(install-data-local): Add rules to install libnss_db in a way that
	mimmicks the way glibc does it as closely as possible.

	* aclocal.m4, configure, Makefile.in: Regenerated.

2000-08-09  Mark Kettenis  <kettenis@gnu.org>

	* makedb.c: Don't include <dlfcn.h>, "nss_db/dummy-db.h" and
	"../version.h".  Include "db-compat.h".  Replace usage of NSS_DB
	with DB.
	(PACKAGE): Don't define.
	[DB_VERSION_MAJOR < 3] (db_strerror): New define.
	(main): Use PACKAGE in call to textdomain.
	Don't call load_db.  Call db_open instead of dbopen.  Use
	db_strerror to print error messages.
	(process_input): Use ISO C function definition.  Use db_strerror
	to print error messages.
	(print_database): Likewise.

	* nss_db.h: Include <db.h>.  Don't include <stdint.h>.  Only
	provide prototypes of internal_setent and internal_endent.
	* db-netgrp.c: Don't include <dlfcn.h> and "nsswitch.h".  Replace
	usage of NSS_DB with DB.
	(_nss_db_setnetgrent): Don't use DL_CALL_FCT.
	* db-alias.c: Don't include <dlfcn.h> and "nsswitch.h".  Include
	<stdio.h>.  Replace usage of NSS_DB, with DB.
	(lookup): Don't use DL_CALL_FCT.
	(_nss_db_getaliasbyname_r): Call alloca instead of __alloca.
	* db-XXX.c: Don't include <dlfcn.h>, <fcntl.h> and "nsswitch.h".
	Include <alloca.h>, <ctype.h>, <db.h>, <netdb.h>, <stdio.h> and
	<string.h>.  Replace usage of NSS_DB with DB.
	(lookup): Don't use DL_CALL_FCT.  Tweak error reporting logic a bit.
	(_nss_db_get##name##_r): Call alloca instead of	__alloca.

	* db-open.c: Remove contents, except for set_cloexec_flag.
	Reimplement internal_setent, internal_endent.

	* AUTHORS, COPYING, COPYING.LIB, ChangeLog, INSTALL, Makefile.am,
	Makefile.in, NEWS, README, THANKS, aclocal.m4, config.guess,
	config.sub, configure, configure.in, db-compat.c, db-compat.h,
	db-ethers.c, db-grp.c, db-proto.c, db-pwd.c, db-rpc.c,
	db-service.c, db-spwd.c, install-sh, libnss_db.map, ltconfig,
	ltmain.sh, missing, mkinstalldirs: New files.

	* files-ethers.c, files-grp.c, files-parse.c, files-proto.c
	files-pwd.c, files-rpc.c, files-service.c, files-spwd.c: Copied from
	nss/nss_files directory in glibc CVS repository.
	* db-XXX.c, db-alias.c, db-netgrp.c, db-open.c, nss_db.h: Copied
	from nss/nss_db directory in glibc CVS repository.
	* db-Makefile, makedb.c: Copied from nss directory in glibc CVS
	repository.
	* netgroup.h: Copied from inet/netgroup.h in glibc CVS repository.

See ChangeLog in glibc distribution for earlier changes.
